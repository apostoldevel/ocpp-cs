{"version":3,"sources":["routes/Networks/Networks.js","util/key.js","components/Datatable/DataTable.js","components/Datatable/DataTableSearch.js","util/Statelabel.js","../node_modules/antd/es/tag/CheckableTag.js","../node_modules/antd/es/tag/index.js","api/online.js","util/PlainSelect.js","../node_modules/@ant-design/icons-svg/es/asn/PlusOutlined.js","../node_modules/@ant-design/icons/es/icons/PlusOutlined.js","util/EditModal.js","routes/Admin/Reference/referenceEditForm.js"],"names":["Networks","React","Component","constructor","props","_this","super","this","m","key","prefix","arguments","length","undefined","intl","formatMessage","id","onMethodFinish","setState","tableUuid","editModalToggle","editModalId","state","editModalVisible","editModalFinish","setColumns","columns","text","title","_jsxs","_Fragment","children","_jsx","Button","className","onClick","e","stopPropagation","icon","PlusOutlined","dataIndex","sorter","render","value","item","description","filterDropdown","DataTableSearch","_objectSpread","filterIcon","filtered","SearchOutlined","style","color","width","Statelabel","onFinish","componentDidMount","componentDidUpdate","prevProps","prevState","snapshot","locale","EditModal","essence","onClose","form","referenceEditForm","call","visible","DataTable","uuid","path","contextType","Context","injectIntl","concat","Date","toString","min","max","Math","ceil","floor","random","makeBasicDefaultOrderParams","result","forEach","col","defaultSortOrder","push","sortDirections","makeQueryParams","mode","queryParams","pagination","filters","search","filterFields","Object","keys","formatDate","d","format","currentColumn","columnGet","v","date","unit","from","startOf","to","endOf","field","compare","dateDataIndex","period","_v$","_v$2","filterMultiple","valarr","numeric","hasMin","hasMax","String","numericCompare","address","addr","Array","isArray","addIKE","fieldName","addEQL","trim","city","settlement","street","house","building","structure","apartment","forceSearch","forceFilter","filter","column","orderby","order","forceOrder","total","skipPagination","reclimit","pageSize","recoffset","current","sum","async","context","api","q","replace","forceToken","skipToken","onSumEnd","count","onCountEnd","load","data","loadStart","toArray","loadEnd","loading","onLoadStart","onLoadEnd","handleTableChange","preserveState","saveState","onFilter","window","test","restoreState","savedState","defaultPagination","JSON","stringify","areaId","operDateIso","Table","rowSelection","scroll","x","showSorterTooltip","rowKey","record","dataSource","onChange","setSelectedKeys","selectedKeys","confirm","clearFilters","useIntl","padding","Space","Input","placeholder","target","onKeyPress","paddingTop","type","IntlMessages","Modal","popoverToggle","popoverOpen","methods","pendingStart","onPendingStart","pending","pendingEnd","onPendingEnd","classcode","run","method","message","success","error","ask","actioncode","content","ExclamationCircleOutlined","onOk","_this$props","statelabel","label","Tag","created","enabled","disabled","deleted","statetypecode","readOnly","Popover","Spin","spinning","map","trigger","open","onOpenChange","withOnline","statenewlabel","statenewtypecode","__rest","s","t","p","prototype","hasOwnProperty","indexOf","getOwnPropertySymbols","i","propertyIsEnumerable","CheckableTag","_a","customizePrefixCls","prefixCls","checked","restProps","getPrefixCls","ConfigContext","cls","classNames","_defineProperty","_extends","PresetColorRegex","RegExp","PresetColorTypes","join","PresetStatusColorRegex","PresetStatusColorTypes","InternalTag","ref","closeIcon","_a$closable","closable","_React$useContext","direction","_React$useState","_React$useState2","_slicedToArray","setVisible","isPresetColor","tagStyle","backgroundColor","presetColor","tagClassName","handleCloseClick","defaultPrevented","isNeedWave","tagProps","omit","iconNode","kids","tagNode","CloseOutlined","Wave","online","is","tick","fetch","goOffline","dispatch","log","goOnline","detail","dispatchEvent","CustomEvent","token","accessToken","get","dt","setMilliseconds","getMilliseconds","config","apiCheckInterval","body","json","response","headers","Headers","append","url","apiDomain","apiPath","_json","_json2","_json2$error","cache","items","n","object","itemsCount","debug","console","mapOnlineProps","propsKeys","onOnlineChanged","_e$detail","_ref","passProps","propName","addEventListener","componentWillUnmount","removeEventListener","anyChanges","onlineInterval","setInterval","Option","Select","PlainSelect","createSearch","searchText","labelKey","enabledOnly","client","getLabelKey","getIdKey","valueKey","shureHaveValue","find","fields","query","extraFields","fetchFn","onSearch","then","idx","option","formatLabel","defaultActiveFirstOption","allowClear","showSearch","optionFilterProp","filterOption","input","toLowerCase","AntdIcon","PlusOutlinedSvg","RefIcon","loadPending","loadPath","queryResult","exact","initialValues","save","saveData","prepareData","savePath","savePending","footer","onCancel","Form","name","layout","scrollToFirstError","htmlType","Empty","TextArea","_window$appConfig","reference","appConfig","adminReferences","formItems","rules","required","component","entries","_ref2","_ref3","Item"],"mappings":"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","file":"static/js/26.e8de026f.chunk.js","sourcesContent":["import React from \"react\";\nimport { Button } from \"antd\";\nimport { PlusOutlined, SearchOutlined } from \"@ant-design/icons\";\nimport { injectIntl } from \"react-intl\";\nimport Context from \"../../Context\";\nimport key from \"../../util/key\";\nimport DataTable from \"../../components/Datatable/DataTable\";\nimport DataTableSearch from \"../../components/Datatable/DataTableSearch\";\nimport Statelabel from \"../../util/Statelabel\";\nimport EditModal from \"../../util/EditModal\";\nimport referenceEditForm from \"../Admin/Reference/referenceEditForm\";\n\nclass Networks extends React.Component {\n  static contextType = Context;\n  constructor(props) {\n    super(props);\n    this.state = {\n      tableUuid: key(),\n      columns: [],\n\n      editModalVisible: false,\n      editModalId: null,\n    };\n  }\n  m = (key, prefix = \"admin.reference.\") => {\n    const { intl } = this.props;\n    return intl.formatMessage({ id: prefix + key });\n  };\n  componentDidMount() {\n    this.setColumns();\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevProps.intl.locale !== this.props.intl.locale) {\n      this.setColumns();\n    }\n  }\n\n  onMethodFinish = () => {\n    this.setState({\n      tableUuid: key(),\n    });\n    if (this.props.onMethodFinish) {\n      this.props.onMethodFinish();\n    }\n  };\n\n  editModalToggle = (editModalId = null) => {\n    this.setState((state) => {\n      return { editModalVisible: !state.editModalVisible, editModalId };\n    });\n  };\n\n  editModalFinish = () => {\n    this.editModalToggle();\n    this.onMethodFinish();\n  };\n\n  setColumns = () => {\n    this.setState({\n      columns: [\n        {\n          text: true,\n          title: (\n            <>\n              <Button\n                className=\"gx-mr-4\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  this.editModalToggle();\n                }}\n                icon={<PlusOutlined />}\n              />\n              {this.m(\"name\")}\n            </>\n          ),\n          dataIndex: \"name\",\n          sorter: true,\n          render: (value, item) => (\n            <>\n              <div>\n                <div\n                  className=\"gx-pointer gx-text-primary\"\n                  onClick={() => this.editModalToggle(item.id)}\n                >\n                  <>{value}</>\n                </div>\n              </div>\n\n              {item.description && (\n                <div className=\"gx-font-weight-light gx-text-muted\">\n                  {item.description}\n                </div>\n              )}\n            </>\n          ),\n\n          filterDropdown: (props) => <DataTableSearch {...props} />,\n          filterIcon: (filtered) => (\n            <SearchOutlined\n              style={{ color: filtered ? \"#1890ff\" : undefined }}\n            />\n          ),\n        },\n\n        {\n          title: this.m(\"typename\"),\n          dataIndex: \"typename\",\n          sorter: true,\n          width: \"25%\",\n          render: (value, item) => (\n            <>\n              <div>{value}</div>\n            </>\n          ),\n        },\n\n        {\n          title: this.m(\"statename\"),\n          dataIndex: \"statename\",\n          sorter: true,\n          width: \"10%\",\n          render: (value, item) => (\n            <div className=\"gx-text-right\">\n              <Statelabel onFinish={this.onMethodFinish} {...item} />\n            </div>\n          ),\n        },\n      ],\n    });\n  };\n\n  render() {\n    return (\n      <>\n        <EditModal\n          essence={\"network\"}\n          onClose={this.editModalToggle}\n          form={referenceEditForm.call(this, { essence: \"network\" })}\n          onFinish={this.editModalFinish}\n          visible={this.state.editModalVisible}\n          id={this.state.editModalId}\n        />\n        <DataTable\n          uuid={this.state.tableUuid}\n          columns={this.state.columns}\n          path={\"/network/list\"}\n        />\n      </>\n    );\n  }\n}\n\nexport default injectIntl(Networks);\n","function getRandomIntInclusive(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport default function key() {\n  return `f${(+new Date()).toString(16)}${getRandomIntInclusive(1000, 9999)}`;\n}\n","import React from 'react';\nimport Context from \"../../Context\";\nimport { Table } from \"antd\";\n\nexport default class DataTable extends React.Component {\n  static contextType = Context;\n\n  constructor(props) {\n    super(props);\n\n    const defaultPagination = {\n      current: 1,\n      pageSize: props.pageSize || 20,\n      total: false,\n    };\n\n    this.state = {\n      data: [],\n      sorter: {},\n      loading: false,\n      columns: props.columns,\n      pagination: defaultPagination,\n      sum: 0.00,\n      filters: props.filters || {}\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.preserveState) {\n      this.restoreState();\n    } else {\n      this.load();\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.props.columns !== this.state.columns) {\n      this.setState({ columns: this.props.columns }, () => this.load());\n    }\n\n    if (JSON.stringify(this.props.forceSearch) !== JSON.stringify(prevProps.forceSearch)) {\n      let { pagination } = this.state;\n      pagination.current = 1;\n      this.setState({ pagination });\n\n      this.load();\n    }\n\n    if (this.props.uuid !== prevProps.uuid) {\n      this.load();\n    }\n\n    if (this.props.areaId !== prevProps.areaId) {\n      this.load();\n    }\n\n    if (this.props.operDateIso !== prevProps.operDateIso) {\n      this.load();\n    }\n  }\n\n  makeBasicDefaultOrderParams = () => {\n    let result = [];\n    if (this.props.columns) {\n      this.props.columns.forEach((col) => {\n        if (col.defaultSortOrder) {\n          result.push(\n            `${col.dataIndex} ${\n              col.sortDirections === \"descend\" ? \"DESC\" : \"ASC\"\n            }`\n          );\n        }\n      });\n    }\n    return result;\n  };\n\n  makeQueryParams = (mode = {}) => {\n    let queryParams = {};\n    const { pagination, filters, sorter } = this.state;\n\n    queryParams.search = [];\n\n    const filterFields = Object.keys(filters);\n\n    const formatDate = (d) => (d && d.format ? d.format(\"DD.MM.YYYY\") : d);\n\n    filterFields.forEach((key) => {\n      if (!filters[key]) return;\n\n      const currentColumn = this.columnGet(key);\n      const v = filters[key];\n\n      // Даты\n      if (currentColumn.date) {\n        // Если пользователь выбрал конкретную неделю/месяц одним значением\n        if (v[0]) {\n          const unit = currentColumn.date === \"week\"\n            ? \"week\"\n            : currentColumn.date === \"month\"\n              ? \"month\"\n              : \"day\";\n\n          const from = v[0].startOf(unit).startOf(\"day\");\n          const to = v[0].endOf(unit).endOf(\"day\");\n\n          queryParams.search.push({\n            field: key,\n            compare: \"LEQ\",\n            value: formatDate(from),\n          });\n          queryParams.search.push({\n            field: currentColumn.dateDataIndex ? currentColumn.dateDataIndex : key,\n            compare: \"GEQ\",\n            value: formatDate(to),\n          });\n        }\n\n        return;\n      }\n\n      if (currentColumn.period) {\n        // Также остаемся совместимыми с диапазоном [from, to]\n        if (v[1]) {\n          const from = v[0]?.startOf(\"day\");\n          const to = v[1]?.endOf(\"day\");\n          if (from) {\n            queryParams.search.push({\n              field: key,\n              compare: \"GEQ\",\n              value: formatDate(from),\n            });\n          }\n          if (to) {\n            queryParams.search.push({\n              field: key,\n              compare: \"LEQ\",\n              value: formatDate(to),\n            });\n          }\n        }\n\n        return;\n      }\n\n      // Множественный выбор (IN)\n      if (currentColumn.filterMultiple) {\n        if (v[0]) {\n          queryParams.search.push({\n            field: key,\n            valarr: v,\n          });\n        }\n        return;\n      }\n\n      // Текст\n      if (currentColumn.text) {\n        if (v[0]) {\n          queryParams.search.push({\n            field: key,\n            compare: \"IKE\",\n            value: `%${v[0]}%`,\n          });\n        }\n        return;\n      }\n\n      // Числовой диапазон\n      if (currentColumn.numeric) {\n        const min = v[0];\n        const max = v[1];\n\n        const hasMin = min !== undefined && min !== null && min !== \"\";\n        const hasMax = max !== undefined && max !== null && max !== \"\";\n\n        if (hasMin) {\n          queryParams.search.push({ field: key, compare: \"GEQ\", value: String(min) });\n        }\n        if (hasMax) {\n          queryParams.search.push({ field: key, compare: \"LEQ\", value: String(max) });\n        }\n\n        // обратная совместимость: если передано одно значение и не указан max,\n        // но в колонке задан numericCompare — используем его\n        if (!hasMax && !hasMin && v[0] !== undefined) {\n          queryParams.search.push({\n            field: key,\n            compare: currentColumn.numericCompare || \"GEQ\",\n            value: String(v[0]),\n          });\n        }\n\n        return;\n      }\n\n      // Адресный фильтр\n      if (currentColumn.address) {\n        // Ожидаем объект вида { city, settlement, street, house, building, structure, apartment }\n        const addr = Array.isArray(v) ? v[0] : v;\n        if (!addr) return;\n\n        const addIKE = (fieldName, value) => {\n          if (value) {\n            queryParams.search.push({\n              field: fieldName,\n              compare: \"IKE\",\n              value: `%${value}%`,\n            });\n          }\n        };\n\n        const addEQL = (fieldName, value) => {\n          if (value !== undefined && value !== null && String(value).trim() !== \"\") {\n            queryParams.search.push({\n              field: fieldName,\n              compare: \"EQL\",\n              value: String(value).trim(),\n            });\n          }\n        };\n\n        // Строковые поля с contains\n        addIKE(\"city\", addr.city);\n        addIKE(\"settlement\", addr.settlement);\n        addIKE(\"street\", addr.street);\n\n        // Номерные/точные поля\n        addEQL(\"house\", addr.house);\n        addEQL(\"building\", addr.building);\n        addEQL(\"structure\", addr.structure);\n        addEQL(\"apartment\", addr.apartment);\n\n        return;\n      }\n\n      // По умолчанию — как массив значений (IN)\n      queryParams.search.push({\n        field: key,\n        valarr: v,\n      });\n    });\n\n    // forceSearch / forceFilter / orderby / pagination — без изменений\n    if (this.props.forceSearch) {\n      queryParams.search = queryParams.search.concat(this.props.forceSearch);\n    }\n\n    if (this.props.forceFilter) {\n      queryParams.filter = this.props.forceFilter;\n    }\n\n    if (sorter.column) {\n      queryParams.orderby = [\n        `${sorter.field} ${sorter.order === \"ascend\" ? \"ASC\" : \"DESC\"}`,\n      ];\n    } else if (!sorter.field) {\n      queryParams.orderby = this.props.forceOrder || this.makeBasicDefaultOrderParams();\n    }\n\n    if (pagination.total && !mode.skipPagination) {\n      queryParams.reclimit = pagination.pageSize;\n      queryParams.recoffset = (pagination.current - 1) * pagination.pageSize;\n    }\n\n    return queryParams;\n  };\n\n  columnGet = (key) => {\n    let result = {};\n    this.state.columns.forEach((col) => {\n      if (col.dataIndex === key) {\n        result = col;\n      }\n    });\n    return result;\n  };\n\n  sum = async () => {\n    if (this.state.columns.length === 0) return 0;\n\n    let result = await this.context.api.q(\n      this.props.path.replace(\"/list\", \"/sum\"),\n      this.makeQueryParams({ skipPagination: true }),\n      false,\n      this.props.forceToken || false,\n      this.props.skipToken || false\n    );\n\n    if (this.props.onSumEnd) {\n      this.props.onSumEnd(result.sum);\n    }\n\n    return result.sum;\n  };\n\n  count = async () => {\n    if (this.state.columns.length === 0) return 0;\n\n    let result = await this.context.api.q(\n      this.props.path.replace(\"/list\", \"/count\"),\n      this.makeQueryParams({ skipPagination: true }),\n      false,\n      this.props.forceToken || false,\n      this.props.skipToken || false\n    );\n\n    if (this.props.onCountEnd) {\n      this.props.onCountEnd(result.count);\n    }\n\n    return result.count;\n  };\n\n  load = async () => {\n    let { pagination, columns, sum } = this.state;\n\n    if (columns.length === 0) return;\n\n    let data = [];\n\n    this.loadStart();\n\n    pagination.total = await this.count();\n\n    if (pagination.total) {\n      data = await this.context.api.q(\n        this.props.path,\n        this.makeQueryParams(),\n        {\n          toArray: true,\n        },\n        this.props.forceToken || false,\n        this.props.skipToken || false\n      );\n    }\n\n    if (this.props.onSumEnd) {\n      sum = await this.sum();\n    }\n\n    this.setState({ data, pagination, sum });\n    this.loadEnd();\n  };\n\n  loadStart = () => {\n    this.setState({ loading: true });\n    if (this.props.onLoadStart) {\n      this.props.onLoadStart();\n    }\n  };\n\n  loadEnd = () => {\n    this.setState({ loading: false });\n    if (this.props.onLoadEnd) {\n      this.props.onLoadEnd(this.state.data);\n    }\n  };\n\n  handleTableChange = (pagination, filters, sorter) => {\n    if (this.props.preserveState) {\n      this.saveState(pagination, filters, sorter);\n    }\n\n    if (this.props.onFilter) {\n      this.props.onFilter(filters);\n    }\n\n    this.setState({ pagination, filters, sorter }, () => this.load());\n  };\n\n  saveState = (pagination, filters, sorter) => {\n    window.test = { pagination, filters, sorter };\n  };\n\n  restoreState = () => {\n    let savedState = window.test || {};\n    this.setState({ ...savedState }, () => this.load());\n  };\n\n  render() {\n    const { columns, data, pagination, loading } = this.state;\n    return (\n      <div>\n        <Table\n          rowSelection={this.props.rowSelection}\n          scroll={{ x: 400 }}\n          showSorterTooltip={false}\n          columns={columns}\n          rowKey={(record) => record.id}\n          dataSource={data}\n          pagination={pagination}\n          loading={loading || this.props.loading}\n          onChange={this.handleTableChange}\n        />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { Button, Space, Input } from \"antd\";\nimport { useIntl } from \"react-intl\";\n\nimport IntlMessages from \"../../util/IntlMessages\";\n\nexport default function DataTableSearch(props) {\n  const { setSelectedKeys, selectedKeys, confirm, clearFilters } = props;\n  function onChange(e) {\n    setSelectedKeys([e.target.value]);\n  }\n  function onKeyPress(e) {\n    if (e.key === \"Enter\") {\n      confirm();\n    }\n  }\n  const intl = useIntl();\n\n  return (\n    <div style={{ padding: 8 }}>\n      <Space>\n        <Input\n          placeholder={intl.formatMessage({\n            id: \"DataTableSearch.placeholder\",\n          })}\n          value={selectedKeys[0] || \"\"}\n          onChange={onChange}\n          onKeyPress={onKeyPress}\n        />\n        <div style={{ paddingTop: 12 }}>\n          <Button type=\"primary\" onClick={() => confirm()}>\n            <IntlMessages id=\"DataTableSearch.search\" />\n          </Button>\n        </div>\n        <div style={{ paddingTop: 12 }}>\n          <Button onClick={() => clearFilters()}>\n            <IntlMessages id=\"DataTableSearch.reset\" />\n          </Button>\n        </div>\n      </Space>\n    </div>\n  );\n}\n","import { message, Popover, Spin, Tag, Modal } from \"antd\";\nimport { injectIntl } from \"react-intl\";\nimport React from \"react\";\nimport Context from \"../Context\";\nimport { ExclamationCircleOutlined } from \"@ant-design/icons\";\nimport { withOnline } from \"../api/online\";\n\nconst { confirm } = Modal;\n\nclass Statelabel extends React.Component {\n  static contextType = Context;\n  constructor(props) {\n    super(props);\n    this.state = {\n      popoverOpen: false,\n      methods: [],\n    };\n  }\n\n  popoverToggle = () => {\n    this.setState(\n      (state) => {\n        return {\n          popoverOpen: !state.popoverOpen,\n          methods: !state.popoverOpen ? [] : state.methods,\n        };\n      },\n      () => this.load()\n    );\n  };\n\n  pendingStart = () => {\n    if (this.props.onPendingStart) {\n      this.props.onPendingStart();\n      return;\n    }\n    this.setState({ pending: true });\n  };\n\n  pendingEnd = () => {\n    if (this.props.onPendingEnd) {\n      this.props.onPendingEnd();\n      return;\n    }\n    this.setState({ pending: false });\n  };\n\n  load = async () => {\n    if (this.state.popoverOpen) {\n      this.pendingStart();\n      let methods = await this.context.api.q(\n        `/${this.props.classcode}/method`,\n        { id: this.props.id },\n        { toArray: true }\n      );\n      this.setState({ methods }, () => this.pendingEnd());\n    }\n  };\n\n  run = async (method) => {\n    this.pendingStart();\n    let result = await this.context.api.q(\"/method/run\", {\n      id: this.props.id,\n      method: method.id,\n    });\n    this.pendingEnd();\n    this.popoverToggle();\n    if (!result) {\n      message.error(this.m(\"method.fail\"));\n      this.setState({ pending: false });\n    } else {\n      message.success(this.m(\"method.success\"));\n      if (this.props.onFinish) {\n        this.props.onFinish(method);\n      }\n    }\n  };\n\n  ask = async (method) => {\n    if (method.actioncode === \"drop\") {\n      confirm({\n        title: this.m(\"method.confirm.title\"),\n        content: this.m(\"method.confirm.text\"),\n        icon: <ExclamationCircleOutlined />,\n        onOk: () => {\n          this.run(method);\n        },\n      });\n    } else {\n      this.run(method);\n    }\n  };\n\n  m = (id) => {\n    const { intl } = this.props;\n    return intl.formatMessage({ id });\n  };\n\n  render() {\n    if (!this.props?.statelabel) return null;\n\n    const { pending, methods = [] } = this.state;\n\n    const colors = {\n      created: \"processing\",\n      enabled: \"success\",\n      disabled: \"default\",\n      deleted: \"error\",\n    };\n\n    const label = (\n      <Tag className=\"gx-m-0\" color={colors[this.props.statetypecode]}>\n        {this.props.statelabel}\n      </Tag>\n    );\n\n    if (this.props.readOnly) return label;\n\n    return (\n      <Popover\n        content={\n          <div className={`${methods.length === 0 && \"gx-p-3\"}`}>\n            <Spin spinning={pending}>\n              {methods.map((method) => {\n                if (!method.visible) return null;\n                return (\n                  <div\n                    key={method.id}\n                    onClick={() => this.ask(method)}\n                    className=\"gx-my-2 gx-pointer gx-link\"\n                  >\n                    {method.label}\n                  </div>\n                );\n              })}\n            </Spin>\n          </div>\n        }\n        trigger=\"click\"\n        open={this.state.popoverOpen}\n        onOpenChange={this.popoverToggle}\n      >\n        <div className=\"gx-pointer\">{label}</div>\n      </Popover>\n    );\n  }\n}\n\nconst mapOnlineProps = {\n  statelabel: (d) => d.statenewlabel,\n  statetypecode: (d) => d.statenewtypecode,\n};\nexport default withOnline(injectIntl(Statelabel), mapOnlineProps);\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { ConfigContext } from '../config-provider';\nvar CheckableTag = function CheckableTag(_a) {\n  var customizePrefixCls = _a.prefixCls,\n    className = _a.className,\n    checked = _a.checked,\n    onChange = _a.onChange,\n    onClick = _a.onClick,\n    restProps = __rest(_a, [\"prefixCls\", \"className\", \"checked\", \"onChange\", \"onClick\"]);\n  var _React$useContext = React.useContext(ConfigContext),\n    getPrefixCls = _React$useContext.getPrefixCls;\n  var handleClick = function handleClick(e) {\n    onChange === null || onChange === void 0 ? void 0 : onChange(!checked);\n    onClick === null || onClick === void 0 ? void 0 : onClick(e);\n  };\n  var prefixCls = getPrefixCls('tag', customizePrefixCls);\n  var cls = classNames(prefixCls, _defineProperty(_defineProperty({}, \"\".concat(prefixCls, \"-checkable\"), true), \"\".concat(prefixCls, \"-checkable-checked\"), checked), className);\n  return /*#__PURE__*/React.createElement(\"span\", _extends({}, restProps, {\n    className: cls,\n    onClick: handleClick\n  }));\n};\nexport default CheckableTag;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport CloseOutlined from \"@ant-design/icons/es/icons/CloseOutlined\";\nimport classNames from 'classnames';\nimport omit from \"rc-util/es/omit\";\nimport * as React from 'react';\nimport { ConfigContext } from '../config-provider';\nimport { PresetColorTypes, PresetStatusColorTypes } from '../_util/colors';\nimport Wave from '../_util/wave';\nimport warning from '../_util/warning';\nimport CheckableTag from './CheckableTag';\nvar PresetColorRegex = new RegExp(\"^(\".concat(PresetColorTypes.join('|'), \")(-inverse)?$\"));\nvar PresetStatusColorRegex = new RegExp(\"^(\".concat(PresetStatusColorTypes.join('|'), \")$\"));\nvar InternalTag = function InternalTag(_a, ref) {\n  var customizePrefixCls = _a.prefixCls,\n    className = _a.className,\n    style = _a.style,\n    children = _a.children,\n    icon = _a.icon,\n    color = _a.color,\n    onClose = _a.onClose,\n    closeIcon = _a.closeIcon,\n    _a$closable = _a.closable,\n    closable = _a$closable === void 0 ? false : _a$closable,\n    props = __rest(_a, [\"prefixCls\", \"className\", \"style\", \"children\", \"icon\", \"color\", \"onClose\", \"closeIcon\", \"closable\"]);\n  var _React$useContext = React.useContext(ConfigContext),\n    getPrefixCls = _React$useContext.getPrefixCls,\n    direction = _React$useContext.direction;\n  var _React$useState = React.useState(true),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    visible = _React$useState2[0],\n    setVisible = _React$useState2[1];\n  // Warning for deprecated usage\n  if (process.env.NODE_ENV !== 'production') {\n    process.env.NODE_ENV !== \"production\" ? warning(!('visible' in props), 'Tag', '`visible` will be removed in next major version, please use `visible && <Tag />` instead.') : void 0;\n  }\n  React.useEffect(function () {\n    if ('visible' in props) {\n      setVisible(props.visible);\n    }\n  }, [props.visible]);\n  var isPresetColor = function isPresetColor() {\n    if (!color) {\n      return false;\n    }\n    return PresetColorRegex.test(color) || PresetStatusColorRegex.test(color);\n  };\n  var tagStyle = _extends({\n    backgroundColor: color && !isPresetColor() ? color : undefined\n  }, style);\n  var presetColor = isPresetColor();\n  var prefixCls = getPrefixCls('tag', customizePrefixCls);\n  var tagClassName = classNames(prefixCls, _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, \"\".concat(prefixCls, \"-\").concat(color), presetColor), \"\".concat(prefixCls, \"-has-color\"), color && !presetColor), \"\".concat(prefixCls, \"-hidden\"), !visible), \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), className);\n  var handleCloseClick = function handleCloseClick(e) {\n    e.stopPropagation();\n    onClose === null || onClose === void 0 ? void 0 : onClose(e);\n    if (e.defaultPrevented) {\n      return;\n    }\n    if (!('visible' in props)) {\n      setVisible(false);\n    }\n  };\n  var renderCloseIcon = function renderCloseIcon() {\n    if (closable) {\n      return closeIcon ? ( /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-close-icon\"),\n        onClick: handleCloseClick\n      }, closeIcon)) : ( /*#__PURE__*/React.createElement(CloseOutlined, {\n        className: \"\".concat(prefixCls, \"-close-icon\"),\n        onClick: handleCloseClick\n      }));\n    }\n    return null;\n  };\n  var isNeedWave = 'onClick' in props || children && children.type === 'a';\n  var tagProps = omit(props, ['visible']);\n  var iconNode = icon || null;\n  var kids = iconNode ? ( /*#__PURE__*/React.createElement(React.Fragment, null, iconNode, /*#__PURE__*/React.createElement(\"span\", null, children))) : children;\n  var tagNode = /*#__PURE__*/React.createElement(\"span\", _extends({}, tagProps, {\n    ref: ref,\n    className: tagClassName,\n    style: tagStyle\n  }), kids, renderCloseIcon());\n  return isNeedWave ? /*#__PURE__*/React.createElement(Wave, null, tagNode) : tagNode;\n};\nvar Tag = /*#__PURE__*/React.forwardRef(InternalTag);\nif (process.env.NODE_ENV !== 'production') {\n  Tag.displayName = 'Tag';\n}\nTag.CheckableTag = CheckableTag;\nexport default Tag;","import React from \"react\";\nimport config from \"./config\";\nimport accessToken from \"./token\";\n\nconst online = {\n  is: false,\n\n  tick: () => {\n    online.fetch();\n  },\n  goOffline: () => {\n    if (online.is) {\n      online.is = false;\n      online.dispatch(\"onlineGoOffline\");\n      online.log(\"Went offline\");\n    }\n  },\n  goOnline: () => {\n    if (!online.is) {\n      online.is = true;\n      online.dispatch(\"onlineGoOnline\");\n      online.log(\"Back On Line\");\n    }\n  },\n  dispatch: (type, detail = {}) => {\n    window.dispatchEvent(new CustomEvent(type, { detail }));\n  },\n  fetch: async () => {\n    let token = accessToken.get();\n    if (token) {\n      let dt = new Date();\n      dt.setMilliseconds(\n        dt.getMilliseconds() - (config.apiCheckInterval + 5000)\n      );\n\n      const body = JSON.stringify({\n        search: [{ field: \"datetime\", value: dt, compare: \"GEQ\" }],\n        reclimit: 500,\n        orderby: [\"datetime DESC\"],\n      });\n\n      let json = null;\n      let response = null;\n      let headers = new Headers();\n      headers.append(\"Content-Type\", \"application/json\");\n      headers.append(\"Authorization\", `Bearer ${token}`);\n      const url = `${config.apiDomain}${config.apiPath}/notification/list`;\n\n      try {\n        response = await fetch(url, {\n          method: \"POST\",\n          headers,\n          body,\n          mode: \"cors\",\n          cache: \"no-store\",\n        });\n        if (response) {\n          json = await response.json();\n          if (json?.error) {\n            return online.error(json?.error?.message);\n          }\n        }\n        online.goOnline();\n      } catch (e) {\n        online.goOffline();\n        return online.error(e.message);\n      }\n      if (json) {\n        let items = {};\n        (Array.isArray(json) ? json : [json]).forEach((n) => {\n          if (!items[n.object]) {\n            items[n.object] = n;\n          }\n        });\n\n        let itemsCount = Object.keys(items).length;\n\n        if (itemsCount > 0) {\n          online.dispatch(\"onlineChanged\", { items });\n          online.log(\"messages count \" + itemsCount);\n        }\n      }\n      return false;\n    }\n  },\n  error: (message) => {\n    if (config.debug) {\n      console.log(`%c OnLine: ERROR \"${message}\"`, \"color: orange\");\n    }\n    return false;\n  },\n  log: (message) => {\n    if (config.debug) {\n      console.log(`%c OnLine: ${message}`, \"color: cyan\");\n    }\n  },\n};\n\nif (!window.onlineInterval && config.apiCheckInterval) {\n  window.setInterval(() => online.tick(), config.apiCheckInterval);\n}\n\nfunction withOnline(Component, mapOnlineProps) {\n  const propsKeys = Object.keys(mapOnlineProps);\n\n  return class extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        data: {},\n        passProps: {},\n      };\n    }\n    componentDidMount() {\n      window.addEventListener(\"onlineChanged\", this.onOnlineChanged);\n    }\n\n    componentWillUnmount() {\n      window.removeEventListener(\"onlineChanged\", this.onOnlineChanged);\n    }\n\n    onOnlineChanged = (e) => {\n      let data = e?.detail?.items[this.props.id];\n      if (data) {\n        this.setState(({ passProps }) => {\n          propsKeys.forEach((propName) => {\n            passProps[propName] = mapOnlineProps[propName](data);\n          });\n          return { passProps };\n        });\n\n        this.setState({ data });\n      }\n    };\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n      let { passProps } = this.state;\n      let anyChanges = false;\n\n      propsKeys.forEach((propName) => {\n        if (prevProps[propName] !== this.props[propName]) {\n          passProps[propName] = this.props[propName];\n          anyChanges = true;\n        }\n      });\n      if (anyChanges) this.setState({ passProps });\n    }\n\n    render() {\n      const { passProps } = this.state;\n\n      return <Component {...this.props} {...passProps} />;\n    }\n  };\n}\n\nexport { online, withOnline };\n","import React from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport { Select } from \"antd\";\nimport Context from \"../Context\";\n\nconst { Option } = Select;\n\nclass PlainSelect extends React.Component {\n  static contextType = Context;\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchText: \"\",\n      pending: false,\n      items: [],\n    };\n  }\n  componentDidMount() {\n    this.load().then(this.shureHaveValue());\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevProps.value !== this.props.value) {\n      this.shureHaveValue();\n    }\n  }\n\n  createSearch = () => {\n    let search = this.props.search || [];\n    if (this.state.searchText && this.props.async) {\n      search.push({\n        field: this.props.labelKey || \"label\",\n        compare: \"IKE\",\n        value: `%${this.state.searchText}%`,\n      });\n    }\n    if (this.props.enabledOnly) {\n      search.push({\n        field: \"statetypecode\",\n        compare: \"EQL\",\n        value: \"enabled\",\n      });\n    }\n    if (this.props.client) {\n      search.push({\n        field: \"client\",\n        value: this.props.client\n      });\n    }\n    return search;\n  };\n\n  getLabelKey = () => this.props.labelKey || \"label\";\n\n  getIdKey = () => this.props.valueKey || \"id\";\n\n  shureHaveValue = async () => {\n    if (this.props.async) {\n      if (\n        !this.state.items.find(\n          (item) => item[this.getIdKey()] === this.props.value\n        )\n      ) {\n        this.setState({ pending: true });\n        let result = await this.context.api.q(\"/object/get\", {\n          id: this.props.value,\n          fields: [this.getIdKey(), this.getLabelKey()],\n        });\n        this.setState({ pending: false });\n        if (result?.[this.getLabelKey()]) {\n          this.setState(({ items }) => {\n            items.push(result);\n            return { items };\n          });\n        }\n      }\n    }\n  };\n\n  load = async () => {\n    if (this.props.items) {\n      this.setState({ items: this.props.items });\n      return;\n    }\n\n    let items = [];\n\n    let reclimit = this.props.async ? 1 : 0;\n\n    if (this.props.query) {\n      this.setState({ pending: true });\n      let search = this.createSearch();\n\n      let fields = [this.getIdKey(), this.getLabelKey()].concat(\n        this.props.extraFields || []\n      );\n\n      let fetchFn = this.props.cache\n        ? this.context.api.cache\n        : this.context.api.q;\n      items = await fetchFn(\n        this.props.query,\n        { search, reclimit, fields },\n        { toArray: true }\n      );\n      this.setState({ pending: false, items });\n    }\n  };\n  onSearch = async (value) => {\n    if (this.props.async) {\n      this.setState({ searchText: value }, () => this.load());\n    }\n  };\n\n  onChange = (value) => {\n    let item = this.state.items.find((i) => i[this.getIdKey()] === value);\n    this.props.onChange(value, item);\n  };\n\n  render() {\n    //let valueRendered = false;\n    let items = this.state.items.map((item, idx) => {\n      let option = item || {};\n      let value = option[this.getIdKey()];\n      let label = this.props.formatLabel\n        ? this.props.formatLabel(item)\n        : option[this.getLabelKey()];\n      //if (value === this.props.value) valueRendered = true;\n      return (\n        <Option key={idx} value={value}>\n          {label}\n        </Option>\n      );\n    });\n\n    return (\n      <Select\n        defaultActiveFirstOption={false}\n        allowClear={this.props.allowClear}\n        loading={this.state.pending ? true : false}\n        value={!this.state.pending ? this.props.value : null}\n        showSearch\n        placeholder={this.props.placeholder}\n        optionFilterProp=\"children\"\n        onChange={this.onChange}\n        onSearch={this.onSearch}\n        filterOption={(input, option) =>\n          option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n        }\n      >\n        {items}\n      </Select>\n    );\n  }\n}\nexport default injectIntl(PlainSelect);\n","// This icon file is generated automatically.\nvar PlusOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z\" } }] }, \"name\": \"plus\", \"theme\": \"outlined\" };\nexport default PlusOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport PlusOutlinedSvg from \"@ant-design/icons-svg/es/asn/PlusOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar PlusOutlined = function PlusOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: PlusOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(PlusOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'PlusOutlined';\n}\nexport default RefIcon;","import React from \"react\";\nimport { Form, Button, message, Modal, Spin, Empty } from \"antd\";\nimport Context from \"../Context\";\nimport { injectIntl } from \"react-intl\";\nclass EditModal extends React.Component {\n  static contextType = Context;\n  constructor(props) {\n    super(props);\n    this.state = {\n      loadPending: false,\n      savePending: false,\n      initialValues: {},\n    };\n  }\n\n  pendingStart = () => {\n    if (this.props.onPendingStart) {\n      this.props.onPendingStart();\n      return;\n    }\n    this.setState({ loadPending: true });\n  };\n  pendingEnd = () => {\n    if (this.props.onPendingEnd) {\n      this.props.onPendingEnd();\n      return;\n    }\n    this.setState({ loadPending: false });\n  };\n\n  componentDidMount() {\n    this.load();\n  }\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevProps.id !== this.props.id) {\n      this.load();\n    }\n  }\n\n  load = async () => {\n    if (this.props.id) {\n      this.pendingStart();\n      let queryParams = this.props.queryParams || { id: this.props.id };\n      let loadPath = this.props.loadPath || `/${this.props.essence}/get`;\n      let queryResult = await this.context.api.q(loadPath, queryParams, {\n        exact: true,\n      });\n      this.setState({ initialValues: queryResult || {} }, () =>\n        this.pendingEnd()\n      );\n    } else {\n      this.setState({ initialValues: {} });\n    }\n  };\n\n  save = async (data) => {\n    let item = this.state.initialValues;\n    let saveData = this.props.prepareData\n      ? this.props.prepareData({ data, item })\n      : data;\n    let savePath = this.props.savePath || `/${this.props.essence}/set`;\n\n    saveData.id = item.id || null;\n\n    this.setState({ savePending: true });\n\tconsole.log(\"@@@\", savePath, saveData)\n    let result = await this.context.api.q(savePath, saveData);\n    if (!result) {\n      message.error(this.m(\"save.fail\", \"\"));\n      this.setState({ pending: false });\n    } else {\n      message.success(this.m(\"save.success\", \"\"));\n      if (this.props.onFinish) this.props.onFinish();\n    }\n\n    this.setState({ savePending: false });\n  };\n\n  onClose = () => {\n    if (this.props.onClose) this.props.onClose();\n  };\n\n  m = (key, prefix = \"editmodal.\") => {\n    const { intl } = this.props;\n    return intl.formatMessage({ id: prefix + key });\n  };\n\n  render() {\n    const { visible, essence, id } = this.props;\n    const { loadPending, savePending, initialValues } = this.state;\n\n    return (\n      <Modal open={visible} footer={null} onCancel={this.onClose}>\n        <Spin spinning={loadPending}>\n          {!loadPending && id && !initialValues.id ? (\n            <Empty />\n          ) : (\n            <div className=\"gx-p-3\">\n              <Form\n                key={initialValues.id}\n                name={essence}\n                layout=\"vertical\"\n                initialValues={initialValues}\n                onFinish={this.save}\n                scrollToFirstError\n              >\n                {this.props.form}\n                <Button\n                  loading={savePending}\n                  type=\"primary\"\n                  htmlType=\"submit\"\n                  className=\"gx-mb-0\"\n                >\n                  {this.m(\"save\", \"\")}\n                </Button>\n              </Form>\n            </div>\n          )}\n        </Spin>\n      </Modal>\n    );\n  }\n}\nexport default injectIntl(EditModal);\n","import React from \"react\";\nimport PlainSelect from \"../../../util/PlainSelect\";\nimport { Form, Input } from \"antd\";\nconst { TextArea } = Input;\n\nexport default function referenceEditForm({ essence }) {\n  const reference = window.appConfig?.adminReferences[essence] || {};\n\n  let formItems = {\n    name: {\n      rules: [\n        {\n          required: true,\n        },\n      ],\n    },\n\n    type: {\n      rules: [\n        {\n          required: true,\n        },\n      ],\n      label: this.m(\"typename\"),\n      component: (\n        <PlainSelect labelKey=\"name\" cache query={`/${essence}/type`} />\n      ),\n    },\n\n    description: {\n      component: <TextArea />,\n    },\n  };\n\n  if (reference.extraFields) {\n    Object.entries(reference.extraFields).forEach(([key, field]) => {\n      formItems[key] = {\n        label: this.m(key),\n      };\n      if (field.type === \"reference\") {\n        formItems[key].component = (\n          <PlainSelect labelKey=\"name\" cache query={field.path} />\n        );\n      }\n      if (field.required) {\n        formItems[key].rules = [\n          {\n            required: true,\n          },\n        ];\n      }\n    });\n  }\n\n  return (\n    <>\n      {Object.entries(formItems).map(([key, item]) => {\n        let label = item.label || this.m(key);\n        let component = item.component || <Input />;\n\n        return (\n          <Form.Item key={key} rules={item.rules} label={label} name={key}>\n            {component}\n          </Form.Item>\n        );\n      })}\n    </>\n  );\n}\n"],"sourceRoot":""}