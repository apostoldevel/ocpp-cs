(this["webpackJsonpocpp-cs"]=this["webpackJsonpocpp-cs"]||[]).push([[36],{1108:function(e,t,s){"use strict";s.r(t);var a=s(2),i=s(0),r=s.n(i),n=s(172),c=s(41),o=s(627),h=s(652),d=s(714),l=s(389),p=s(764),j=s(142),m=s(127),u=s(716),b=s(1094),x=s(604),O=s(599),g=s(595),y=s(100),S=s(607),f=s(637),N=s(682),v=s(638),M=s(636),w=s(3);const{Text:D}=d.a;class T extends r.a.Component{constructor(e){super(e),this.pendingStart=()=>{this.setState({pending:!0})},this.pendingEnd=()=>{this.setState({pending:!1})},this.setParams=()=>{const{param1:e}=this.props.match.params;this.setState({groupId:e,treeKey:Object(o.a)()})},this.load=async()=>{this.pendingStart();let e=[];this.state.treeSearch&&e.push({field:"name",compare:"IKE",value:"%".concat(this.state.treeSearch,"%")});let t=await this.context.api.q("/admin/group/list",{search:e},{toTree:!0});this.setState({tree:t||[],treeKey:Object(o.a)()}),this.pendingEnd()},this.save=async e=>{const{groupId:t}=this.state,{intl:s}=this.props;let i=Object(a.a)(Object(a.a)({},e),{},{id:t&&"add"!==t?t:null});this.pendingStart();let r=await this.context.api.q("/admin/group/set",i);!1===r?(this.pendingEnd(),l.b.error(s.formatMessage({id:"save.fail"}))):(l.b.success(s.formatMessage({id:"save.success"})),await this.load(),"add"===t&&r.id&&this.props.history.push("/admin/groups/".concat(r.id,"/")))},this.getItem=()=>{const{groupId:e,tree:t}=this.state;return t.find(t=>t.id===e)||{}},this.onTreeSelect=e=>{Array.isArray(e)&&e[0]&&this.props.history.push("/admin/groups/".concat(e[0]))},this.onTreeSearch=e=>{this.setState({treeSearch:e},()=>this.load())},this.onAddStart=()=>{this.props.history.push("/admin/groups/add")},this.onDelete=async()=>{const{intl:e,history:t}=this.props,{groupId:s}=this.state;this.pendingStart(),!1!==await this.context.api.q("/admin/group/delete",{id:s})?(l.b.success(e.formatMessage({id:"delete.success"})),t.push("/admin/groups/"),this.load()):(l.b.error(e.formatMessage({id:"delete.fail"})),this.pendingEnd())},this.m=e=>{const{intl:t}=this.props;return t.formatMessage({id:"admin.groups."+e})},this.state={treeSearch:"",treeKey:Object(o.a)(),tree:[]}}componentDidMount(){this.setParams(),this.load()}componentDidUpdate(e,t,s){Object(v.a)(e,this.props)&&this.setParams(),e.intl.locale!==this.props.intl.locale&&this.load()}render(){const{pending:e,treeKey:t,groupId:s}=this.state,{intl:a}=this.props,i=this.getItem();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(M.a,{title:this.m("groups"),url:"/admin/groups",icon:Object(w.jsx)(S.a,{})}),Object(w.jsxs)(h.a,{pending:e,onSearch:this.onTreeSearch,children:[Object(w.jsx)("div",{children:i.id&&Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(D,{type:"secondary",children:i.name})})}),Object(w.jsx)("div",{className:"isoNoteBtns",children:Object(w.jsxs)(p.b,{children:[Object(w.jsx)(j.a,{title:this.m("btn.add"),children:Object(w.jsx)(m.a,{onClick:this.onAddStart,type:"primary",icon:Object(w.jsx)(f.a,{})})}),s&&"add"!==s&&Object(w.jsx)(u.a,{title:"".concat(a.formatMessage({id:"delete.sure"})),onConfirm:()=>this.onDelete(),okText:a.formatMessage({id:"yes"}),cancelText:a.formatMessage({id:"no"}),children:Object(w.jsx)(j.a,{title:this.m("btn.delete"),children:Object(w.jsx)(m.a,{icon:Object(w.jsx)(N.a,{})})})})]})}),Object(w.jsx)(b.a,{defaultExpandAll:!0,defaultExpandParent:!0,defaultSelectedKeys:[s],defaultExpandedKeys:[s],treeData:this.state.tree,onSelect:this.onTreeSelect},t),Object(w.jsxs)("div",{children:[i.system&&Object(w.jsx)(x.a,{style:{marginBottom:"15px"},type:"warning",message:this.m("system")}),s&&Object(w.jsx)(O.a,{layout:"vertical",name:"type",initialValues:{name:i.name||"",username:i.username||"",description:i.description||""},onFinish:this.save,children:Object(w.jsxs)(p.b,{direction:"vertical",style:{width:"100%"},children:[Object(w.jsx)(O.a.Item,{rules:[{required:!0}],label:this.m("name"),name:"name",children:Object(w.jsx)(g.a,{})}),Object(w.jsx)(O.a.Item,{rules:[{required:!0}],label:this.m("username"),name:"username",children:Object(w.jsx)(g.a,{})}),Object(w.jsx)(O.a.Item,{label:this.m("description"),name:"description",children:Object(w.jsx)(g.a,{})}),Object(w.jsx)(O.a.Item,{children:Object(w.jsx)(p.b,{children:Object(w.jsx)(m.a,{loading:e,type:"primary",htmlType:"submit",children:a.formatMessage({id:"save"})})})})]})},i.id)]})]})]})}}T.contextType=y.a,t.default=Object(c.i)(Object(n.c)(T))},627:function(e,t,s){"use strict";function a(){return"f".concat((+new Date).toString(16)).concat((e=1e3,t=9999,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e));var e,t}s.d(t,"a",function(){return a})},636:function(e,t,s){"use strict";s.d(t,"a",function(){return c});var a=s(764),i=(s(0),s(102)),r=s(22),n=s(3);function c(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(i.a,{children:Object(n.jsx)("title",{children:e.title})}),Object(n.jsx)("h2",{className:"title gx-mb-4",children:Object(n.jsx)(r.a,{to:e.url,className:"gx-text-dark",children:Object(n.jsxs)(a.b,{children:[e.icon,e.title]})})})]})}},638:function(e,t,s){"use strict";function a(e,t){const s=e.match.params||{},a=t.match.params||{};return s.param1!==a.param1||s.param2!==a.param2||s.param3!==a.param3}s.d(t,"a",function(){return a})},647:function(e,t,s){"use strict";var a=s(0),i=s.n(a),r=s(595),n=s(172),c=s(3);let o=null;class h extends i.a.Component{constructor(e){super(e),this.searchHandle=e=>{this.setState({searchValue:e}),this.state.searchDelay||!this.props.onSearch?(this.setState({searchPending:!0}),window.clearTimeout(o),o=window.setTimeout(()=>{this.setState({searchPending:!1}),this.props.onSearch&&this.props.onSearch(e)},this.state.searchDelay)):this.props.onSearch(e)},this.searchOnChange=e=>{this.searchHandle(e.target.value)},this.state={searchValue:e.defaultValue||"",searchPending:!1,searchDelay:e.hasOwnProperty("searchDelay")?e.searchDelay:1e3}}render(){const{intl:e,className:t}=this.props,{searchValue:s,searchPending:a}=this.state;let i=this.props.placeholder||e.formatMessage({id:"search.placeholder"});return Object(c.jsx)(r.a.Search,{placeholder:i,className:t,value:s,onChange:this.searchOnChange,onSearch:()=>this.searchHandle(s),loading:a})}}t.a=Object(n.c)(h)},652:function(e,t,s){"use strict";var a=s(0),i=s.n(a),r=s(126),n=s(260),c=s(3);var o=e=>{let{id:t,style:s,children:a,className:i}=e;return Object(c.jsx)(n.Scrollbars,{id:t,className:i,style:s,autoHide:!0,autoHideTimeout:1e3,autoHideDuration:200,autoHeightMin:0,autoHeightMax:200,thumbMinSize:30,universal:!0,children:a})},h=s(647),d=s(596),l=s(693),p=s(172);const{Header:j,Content:m}=d.a;class u extends i.a.Component{render(){const[e,t,s,a]=this.props.children;return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(l.a,{spinning:!!this.props.pending,children:Object(c.jsxs)("div",{className:"isomorphicNoteComponent",children:[Object(c.jsx)("div",{style:{width:"340px"},className:"isoNoteListSidebar",children:Object(c.jsxs)("div",{className:"isoNoteListWrapper",children:[this.props.onSearch&&Object(c.jsx)(h.a,{placeholder:this.props.searchPlaceholder,className:"isoSearchNotes",onSearch:this.props.onSearch,searchDelay:this.props.searchDelay}),Object(c.jsx)("div",{className:"isoNoteList",children:s?Object(c.jsx)(o,{children:Object(c.jsx)("div",{className:"isoNoteListHolder",children:s})}):Object(c.jsx)("span",{className:"isoNoResultMsg",children:Object(c.jsx)(r.a,{id:"nothing.found"})})})]})}),Object(c.jsxs)(d.a,{className:"isoNotepadWrapper",children:[Object(c.jsxs)(j,{className:"isoHeader",children:[e,t]}),Object(c.jsx)(m,{className:"isoNoteEditingArea",children:a&&Object(c.jsx)(o,{children:Object(c.jsx)("div",{className:"isoNoteContentHolder",children:a})})})]})]})})})}}t.a=Object(p.c)(u)}}]);
//# sourceMappingURL=36.3dfb8f3b.chunk.js.map