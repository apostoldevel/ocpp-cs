{"version":3,"sources":["util/compressor.js","routes/Profile/Profile.js","util/toBase64.js"],"names":["defaultParams","maxWidth","maxHeight","quality","Profile","React","Component","constructor","props","_this","super","this","m","key","prefix","arguments","length","undefined","intl","formatMessage","id","save","async","user","setState","pending","context","api","q","username","raw","profile","password","data","email","name","message","success","onAfterSave","error","changePassword","oldpass","newpass","prepareAvatar","state","fileInputRef","current","files","file","maxSize","window","appConfig","maxFileSize","size","concat","Math","round","readerResult","toBase64","base64","callParams","canvas","document","createElement","img","Object","assign","Promise","resolve","reject","onload","width","height","getContext","drawImage","toDataURL","onerror","err","src","compressor","then","compressedResult","saveAvatar","modalHide","picture","modalShow","location","reload","moodalShow","createRef","render","layout","labelCol","span","wrapperCol","_jsxs","children","_jsx","Helmet","Modal","title","open","onOk","onCancel","footer","Button","onClick","type","loading","Spin","spinning","ref","className","Card","Flex","between","wrap","show","Avatar","style","marginRight","literal","hello","Space","Badge","backgroundColor","count","isAdmin","isGuest","connectionLink","navigator","clipboard","writeText","CopyOutlined","Form","_objectSpread","onFinish","autoComplete","Item","rules","required","label","initialValue","Input","placeholder","Row","Col","htmlType","Password","contextType","Context","connect","injectIntl","reader","FileReader","readAsDataURL","result","resultString","toString","re","match","encoded","replace","repeat"],"mappings":"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","file":"static/js/39.10bd7cb6.chunk.js","sourcesContent":["const defaultParams = {\n  maxWidth: 2000,\n  maxHeight: 2000,\n  quality: 0.8,\n};\n\nexport default function compressor(base64, callParams = {}) {\n  const canvas = document.createElement(\"canvas\");\n  const img = document.createElement(\"img\");\n\n  const { maxWidth, maxHeight, quality } = Object.assign(\n    defaultParams,\n    callParams\n  );\n\n  return new Promise((resolve, reject) => {\n    img.onload = function () {\n      let width = img.width;\n      let height = img.height;\n\n      if (width > height) {\n        if (width > maxWidth) {\n          height = Math.round((height *= maxWidth / width));\n          width = maxWidth;\n        }\n      } else {\n        if (height > maxHeight) {\n          width = Math.round((width *= maxHeight / height));\n          height = maxHeight;\n        }\n      }\n      canvas.width = width;\n      canvas.height = height;\n\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(img, 0, 0, width, height);\n      //resolve(base64);\n      resolve(canvas.toDataURL(\"image/jpeg\", quality));\n    };\n    img.onerror = function (err) {\n      resolve(false);\n    };\n    img.src = base64;\n  });\n}\n","import React from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport Context from \"../../Context\";\nimport { Helmet } from \"react-helmet\";\nimport {\n  Form,\n  Input,\n  Button,\n  Space,\n  Card,\n  Avatar,\n  Badge,\n  Row,\n  Col,\n  message,\n  Modal,\n  Spin,\n} from \"antd\";\n\nimport { connect } from \"react-redux\";\nimport Flex from \"../../util/Flex\";\nimport compressor from \"../../util/compressor\";\nimport toBase64 from \"../../util/toBase64\";\nimport { CopyOutlined } from \"@ant-design/icons\";\n\nclass Profile extends React.Component {\n  static contextType = Context;\n  constructor(props) {\n    super(props);\n    this.state = {\n      pending: false,\n      moodalShow: false,\n      fileInputRef: React.createRef(),\n    };\n  }\n  m = (key, prefix = \"userprofile.\") => {\n    const { intl } = this.props;\n    return intl.formatMessage({ id: prefix + key });\n  };\n  save = async (data) => {\n    const { user } = this.props;\n    this.setState({ pending: true });\n    let result = await this.context.api.q(\"/user/set\", {\n      username: user.raw.profile.username,\n      password: data.password,\n      email: data.email,\n      name: data.name,\n    });\n    if (!result) {\n      message.error(this.m(\"save.fail\", \"\"));\n      this.setState({ pending: false });\n    } else {\n      message.success(this.m(\"save.success\", \"\"));\n      this.onAfterSave();\n    }\n  };\n\n  changePassword = async (data) => {\n    this.setState({ pending: true });\n    let result = await this.context.api.q(\"/user/password\", {\n      oldpass: data.oldpass,\n      newpass: data.newpass,\n    });\n    if (!result) {\n      message.error(this.m(\"save.fail\", \"\"));\n      this.setState({ pending: false });\n    } else {\n      message.success(this.m(\"save.success\", \"\"));\n      this.onAfterSave();\n    }\n  };\n\n  prepareAvatar = async () => {\n    if (this.state.fileInputRef.current) {\n      if (this.state.fileInputRef.current.files[0]) {\n        this.setState({ pending: true });\n        const file = this.state.fileInputRef.current.files[0];\n\n        const maxSize = window.appConfig.maxFileSize;\n        if (maxSize && file.size > maxSize) {\n          message.error(\n            `${this.m(\"file.size.exceed\", \"\")}: ${Math.round(\n              maxSize / 1024\n            )} ${this.m(\"kb\", \"\")}`\n          );\n          this.setState({ pending: false });\n          return;\n        }\n\n        let { readerResult } = await toBase64(file);\n        compressor(readerResult, { maxWidth: 200, maxHeight: 200 }).then(\n          (compressedResult) => {\n            if (compressedResult) {\n              this.saveAvatar(compressedResult);\n            } else {\n              message.error(this.m(\"file.read.failed\", \"\"));\n              this.setState({ pending: false });\n            }\n          }\n        );\n      } else {\n        this.modalHide();\n      }\n    } else {\n      this.modalHide();\n    }\n  };\n  saveAvatar = async (picture) => {\n    this.setState({ pending: true });\n    let result = await this.context.api.q(\"/user/profile/set\", {\n      picture,\n    });\n    if (!result) {\n      message.error(this.m(\"save.fail\", \"\"));\n      this.setState({ pending: false });\n    } else {\n      message.success(this.m(\"save.success\", \"\"));\n      this.onAfterSave();\n    }\n  };\n  modalShow = () => {\n    this.setState({ modalShow: true });\n  };\n  modalHide = () => {\n    this.setState({ modalShow: false });\n  };\n  onAfterSave = () => {\n    document.location.reload();\n  };\n  render() {\n    const { user } = this.props;\n    const { pending, modalShow, fileInputRef } = this.state;\n\n    const layout = {\n      labelCol: {\n        span: 8,\n      },\n      wrapperCol: {\n        span: 16,\n      },\n    };\n\n    return (\n      <div>\n        <Helmet>\n          <title>{this.m(\"profile\")}</title>\n        </Helmet>\n        <Modal\n          title={this.m(\"avatar.change\")}\n          open={modalShow}\n          onOk={this.prepareAvatar}\n          onCancel={this.modalHide}\n          footer={[\n            <Button key=\"cancell\" onClick={this.modalHide}>\n              {this.m(\"cancell\", \"\")}\n            </Button>,\n            <Button key=\"remove\" onClick={() => this.saveAvatar(\"\")}>\n              {this.m(\"avatar.remove\")}\n            </Button>,\n            <Button\n              key=\"submit\"\n              type=\"primary\"\n              loading={pending}\n              onClick={this.prepareAvatar}\n            >\n              {this.m(\"save\", \"\")}\n            </Button>,\n          ]}\n        >\n          <Spin spinning={pending}>\n            <input ref={fileInputRef} type=\"file\" className=\"form-control\" />\n          </Spin>\n        </Modal>\n        <h2 className=\"title gx-mb-4\">{this.m(\"profile\")}</h2>\n        <Card>\n          <Flex between className=\"flex-reset-lg\">\n            <Flex wrap>\n              <div className=\"gx-pointer\" onClick={this.modalShow}>\n                {user.show.picture ? (\n                  <Avatar\n                    size={64}\n                    src={user.show.picture}\n                    style={{\n                      marginRight: \"15px\",\n                    }}\n                  />\n                ) : (\n                  <Avatar\n                    size={64}\n                    style={{\n                      marginRight: \"15px\",\n                    }}\n                  >\n                    {user.show.literal}\n                  </Avatar>\n                )}\n              </div>\n              <div>\n                <h5>{user.show.hello}</h5>\n                <Space>\n                  <Badge\n                    style={{ backgroundColor: \"#52c41a\" }}\n                    count={this.m(\"active\")}\n                  />\n                  {user.isAdmin && (\n                    <Badge\n                      style={{ backgroundColor: \"#038FDE\" }}\n                      count={this.m(\"admin\")}\n                    />\n                  )}\n                  {user.isGuest && (\n                    <Badge\n                      style={{ backgroundColor: \"#a0d911\" }}\n                      count={this.m(\"guest\")}\n                    />\n                  )}\n                </Space>\n              </div>\n            </Flex>\n            <div className=\"gx-text-right\">\n              <div>{this.m(\"connection\")}:</div>\n              <div className=\"gx-text-muted gx-font-weight-light gx-mt-1 break-all\">\n                {user.connectionLink}\n                <span\n                  className=\"gx-ml-2 gx-link\"\n                  onClick={() => {\n                    navigator.clipboard.writeText(user.connectionLink);\n                    message.success(this.m(\"copied\"));\n                  }}\n                >\n                  <CopyOutlined />\n                </span>\n              </div>\n              <div><small>{this.m(\"connectionHint\")}</small></div>\n            </div>\n          </Flex>\n        </Card>\n        <Card>\n          <Spin spinning={pending}>\n            <Form\n              name=\"basic\"\n              onFinish={this.save}\n              className=\"gx-signin-form gx-form-row0\"\n              autoComplete=\"off\"\n              {...layout}\n            >\n              <Form.Item\n                rules={[\n                  {\n                    required: true,\n                    type: \"email\",\n                    message: this.m(\"email.invalid\"),\n                  },\n                ]}\n                name=\"email\"\n                label={this.m(\"email\")}\n                initialValue={user.raw.profile.email}\n              >\n                <Input placeholder={this.m(\"email\")} />\n              </Form.Item>\n              <Form.Item\n                rules={[\n                  {\n                    required: true,\n                    message: this.m(\"name.invalid\"),\n                  },\n                ]}\n                name=\"name\"\n                label={this.m(\"name\")}\n                initialValue={user.raw.profile.name}\n              >\n                <Input placeholder={this.m(\"name\")} />\n              </Form.Item>\n\n              <Row>\n                <Col span={8}></Col>\n                <Col span={16}>\n                  <Button type=\"primary\" htmlType=\"submit\" loading={pending}>\n                    {this.m(\"save\", \"\")}\n                  </Button>\n                </Col>\n              </Row>\n            </Form>\n          </Spin>\n        </Card>\n        <h2 className=\"gx-mb-4\">{this.m(\"passchange\")} </h2>\n        <Card>\n          <Spin spinning={pending}>\n            <Form\n              name=\"basic\"\n              onFinish={this.changePassword}\n              className=\"gx-signin-form gx-form-row0\"\n              autoComplete=\"off\"\n              {...layout}\n            >\n              <Form.Item\n                rules={[\n                  {\n                    required: true,\n                  },\n                ]}\n                label={this.m(\"oldpass\")}\n                name=\"oldpass\"\n              >\n                <Input.Password />\n              </Form.Item>\n              <Form.Item\n                rules={[\n                  {\n                    required: true,\n                  },\n                ]}\n                label={this.m(\"newpass\")}\n                name=\"newpass\"\n              >\n                <Input.Password />\n              </Form.Item>\n\n              <Row>\n                <Col span={8}></Col>\n                <Col span={16}>\n                  <Button type=\"primary\" htmlType=\"submit\" loading={pending}>\n                    {this.m(\"change\", \"\")}\n                  </Button>\n                </Col>\n              </Row>\n            </Form>\n          </Spin>\n        </Card>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n});\n\nexport default connect(mapStateToProps, null)(injectIntl(Profile));\n","export default function toBase64(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => {\n      const readerResult = reader.result;\n      const resultString = readerResult.toString();\n      const re = /^data:(.*,)?/;\n      let mimeRe = resultString.match(re);\n      let type = mimeRe[0];\n\n      let encoded = resultString.replace(re, \"\");\n      if (encoded.length % 4 > 0) {\n        encoded += \"=\".repeat(4 - (encoded.length % 4));\n      }\n\n      resolve({ encoded, type, readerResult });\n    };\n    reader.onerror = (error) => reject(error);\n  });\n}\n"],"sourceRoot":""}