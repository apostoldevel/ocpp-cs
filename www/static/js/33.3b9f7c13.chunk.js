(this["webpackJsonpocpp-cs"]=this["webpackJsonpocpp-cs"]||[]).push([[33],{1118:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),c=s(627),i=s(172),r=s(22),o=s(41),l=s(764),h=s(127),d=s(1094),p=s(389),m=s(652);var j=s(100),u=s(638),b=s(615),O=s(2),x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"},g=s(12),f=function(e,t){return n.createElement(g.a,Object(O.a)(Object(O.a)({},e),{},{ref:t,icon:x}))};var v=n.forwardRef(f),y=s(649),S=s(636),N=s(717),C=s(763),w=s(599),H=s(595),P=s(3);const{Option:I}=N.a;class E extends a.a.Component{constructor(){super(...arguments),this.mc=(e,t)=>this.props.m(this.props.command+"."+e,t),this.m=(e,t)=>this.props.m(e,t)}render(){if(!this.props.station||!this.props.command)return Object(P.jsx)(C.a,{});const e=this.context.ocpp.commands[this.props.command],t=null===e||void 0===e?void 0:e.form;if(!t)return Object(P.jsx)(C.a,{});const s=e=>{switch(e.type){case"string":return e.enum?Object(P.jsx)(N.a,{children:e.enum.map(e=>Object(P.jsx)(I,{value:e,children:e},e))}):(e.format,Object(P.jsx)(H.a,{}));case"array":case"object":return Object(P.jsx)(H.a,{});case"integer":case"number":return Object(P.jsx)(H.a,{type:"number"});default:return null}};return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)(w.a,{layout:"vertical",name:"command",onFinish:this.props.onFinish,scrollToFirstError:!0,children:[(e=>{const{properties:t,required:n}=e;return 0===Object.entries(t).length?Object(P.jsx)("div",{className:"gx-text-grey gx-font-weight-normal gx-mb-3",children:this.m("noform")}):Object.entries(t).map(e=>{let[t,a]=e;return Object(P.jsx)(w.a.Item,{rules:[{required:null===n||void 0===n?void 0:n.includes(t)}],label:this.mc(t),name:t,extra:Object(P.jsxs)("div",{className:"gx-text-grey gx-font-weight-light gx-text-small",children:[Object(P.jsx)("span",{className:"gx-font-weight-normal gx-mr-2",children:this.m("type."+a.type)}),this.mc(t+".description")]}),children:s(a)},t)})})(t),Object(P.jsx)(h.a,{type:"primary",htmlType:"submit",children:this.m("submit","")})]},this.props.command)})}}E.contextType=j.a;var M=Object(i.c)(E);class F extends a.a.Component{constructor(e){var t;super(e),t=this,this.pendingStart=()=>{this.props.onPendingStart?this.props.onPendingStart():this.setState({pending:!0})},this.pendingEnd=()=>{this.props.onPendingEnd?this.props.onPendingEnd():this.setState({pending:!1})},this.setParams=()=>{const{param1:e,param2:t}=this.props.match.params;this.setState({identity:e,command:t,commandResult:null},()=>{this.load(e)})},this.load=async e=>{const t=null!==e&&void 0!==e?e:this.state.identity;this.setState({pending:!0});const s=this.context.ocpp.getArray(await this.context.ocpp.q("/ChargePointList",t?{identity:t}:{}),"ChargePointList","identity"),n=Object.entries(this.context.ocpp.commands).map(e=>{let[t]=e;return{key:t,title:this.m(t)}});this.setState({treeKey:Object(c.a)(),tree:n,stations:s,pending:!1})},this.getStation=e=>this.state.stations.find(t=>t.identity===e),this.onTreeSelect=e=>{Array.isArray(e)&&e[0]&&this.props.history.push("/ocpp/command/".concat(this.state.identity,"/").concat(e[0],"/"))},this.onTreeSearch=e=>{this.setState({treeSearch:e})},this.onFormFinish=async e=>{const{command:t,identity:s}=this.state;this.pendingStart();let n=e;Object.keys(n).forEach(e=>{"reservationId"===e||"transactionId"===e||"connectorId"===e?n[e]=Number(n[e]):"csChargingProfiles"===e&&(n[e]=JSON.parse(n[e]))});let a=await this.context.ocpp.q("/ChargePoint/".concat(s,"/").concat(t),n);this.setState({commandResult:a}),this.pendingEnd()},this.m=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ocpp.commands.";const{intl:n}=t.props;return n.formatMessage({id:s+e})},this.state={treeSearch:"",treeKey:Object(c.a)(),tree:[],stations:[],identity:null,command:null,commandResult:null,pending:!1}}componentDidMount(){this.setParams()}componentDidUpdate(e,t,s){Object(u.a)(e,this.props)&&this.setParams(),e.intl.locale!==this.props.intl.locale&&this.load()}render(){const{pending:e,treeKey:t,identity:s,command:n,commandResult:a,tree:c,treeSearch:i}=this.state,o=this.getStation(s);let j=i?c.filter(e=>{let t=new RegExp(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}(i),"gi");return(e.title.toString().match(t)||[]).length>0}):c;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(S.a,{title:this.m("commands"),url:"/ocpp/command",icon:Object(P.jsx)(b.a,{})}),Object(P.jsxs)(m.a,{pending:e,onSearch:this.onTreeSearch,searchDelay:0,children:[Object(P.jsx)("div",{children:o?Object(P.jsxs)(l.b,{children:[Object(P.jsx)(r.a,{to:"/ocpp",children:Object(P.jsx)("h3",{className:"gx-mb-0",children:o.identity})}),Object(P.jsx)("div",{className:"gx-mb-0 gx-text-muted gx-text-grey",children:o.label||o.address})]}):Object(P.jsx)(P.Fragment,{children:!e&&Object(P.jsx)(r.a,{to:"/ocpp",children:this.m("pick")})})}),Object(P.jsx)("div",{className:"isoNoteBtns",children:Object(P.jsx)(l.b,{children:Object(P.jsx)(r.a,{to:"/ocpp",children:Object(P.jsx)(h.a,{onClick:this.onAddStart,type:"secondary",icon:Object(P.jsx)(v,{})})})})}),Object(P.jsx)(d.a,{defaultExpandParent:!0,defaultSelectedKeys:[n],defaultExpandedKeys:[n],treeData:j,onSelect:this.onTreeSelect},t),Object(P.jsxs)("div",{children:[Object(P.jsx)(M,{m:this.m,onFinish:this.onFormFinish,station:o,command:n}),a&&Object(P.jsxs)("div",{className:"inspector",children:[Object(P.jsx)("hr",{}),Object(P.jsxs)("h3",{children:[this.m("result"),Object(P.jsx)(h.a,{className:"gx-ml-2 gx-mb-0",onClick:()=>{navigator.clipboard.writeText(JSON.stringify(a,null,2)),p.b.success(this.m("copied"))},icon:Object(P.jsx)(y.a,{})})]}),Object(P.jsx)("pre",{children:JSON.stringify(a,null,2)})]})]})]})]})}}F.contextType=j.a;t.default=Object(o.i)(Object(i.c)(F))},627:function(e,t,s){"use strict";function n(){return"f".concat((+new Date).toString(16)).concat((e=1e3,t=9999,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e));var e,t}s.d(t,"a",function(){return n})},636:function(e,t,s){"use strict";s.d(t,"a",function(){return r});var n=s(764),a=(s(0),s(102)),c=s(22),i=s(3);function r(e){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(a.a,{children:Object(i.jsx)("title",{children:e.title})}),Object(i.jsx)("h2",{className:"title gx-mb-4",children:Object(i.jsx)(c.a,{to:e.url,className:"gx-text-dark",children:Object(i.jsxs)(n.b,{children:[e.icon,e.title]})})})]})}},638:function(e,t,s){"use strict";function n(e,t){const s=e.match.params||{},n=t.match.params||{};return s.param1!==n.param1||s.param2!==n.param2||s.param3!==n.param3}s.d(t,"a",function(){return n})},647:function(e,t,s){"use strict";var n=s(0),a=s.n(n),c=s(595),i=s(172),r=s(3);let o=null;class l extends a.a.Component{constructor(e){super(e),this.searchHandle=e=>{this.setState({searchValue:e}),this.state.searchDelay||!this.props.onSearch?(this.setState({searchPending:!0}),window.clearTimeout(o),o=window.setTimeout(()=>{this.setState({searchPending:!1}),this.props.onSearch&&this.props.onSearch(e)},this.state.searchDelay)):this.props.onSearch(e)},this.searchOnChange=e=>{this.searchHandle(e.target.value)},this.state={searchValue:e.defaultValue||"",searchPending:!1,searchDelay:e.hasOwnProperty("searchDelay")?e.searchDelay:1e3}}render(){const{intl:e,className:t}=this.props,{searchValue:s,searchPending:n}=this.state;let a=this.props.placeholder||e.formatMessage({id:"search.placeholder"});return Object(r.jsx)(c.a.Search,{placeholder:a,className:t,value:s,onChange:this.searchOnChange,onSearch:()=>this.searchHandle(s),loading:n})}}t.a=Object(i.c)(l)},649:function(e,t,s){"use strict";var n=s(2),a=s(0),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},i=s(12),r=function(e,t){return a.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:c}))},o=a.forwardRef(r);t.a=o},652:function(e,t,s){"use strict";var n=s(0),a=s.n(n),c=s(126),i=s(260),r=s(3);var o=e=>{let{id:t,style:s,children:n,className:a}=e;return Object(r.jsx)(i.Scrollbars,{id:t,className:a,style:s,autoHide:!0,autoHideTimeout:1e3,autoHideDuration:200,autoHeightMin:0,autoHeightMax:200,thumbMinSize:30,universal:!0,children:n})},l=s(647),h=s(596),d=s(693),p=s(172);const{Header:m,Content:j}=h.a;class u extends a.a.Component{render(){const[e,t,s,n]=this.props.children;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(d.a,{spinning:!!this.props.pending,children:Object(r.jsxs)("div",{className:"isomorphicNoteComponent",children:[Object(r.jsx)("div",{style:{width:"340px"},className:"isoNoteListSidebar",children:Object(r.jsxs)("div",{className:"isoNoteListWrapper",children:[this.props.onSearch&&Object(r.jsx)(l.a,{placeholder:this.props.searchPlaceholder,className:"isoSearchNotes",onSearch:this.props.onSearch,searchDelay:this.props.searchDelay}),Object(r.jsx)("div",{className:"isoNoteList",children:s?Object(r.jsx)(o,{children:Object(r.jsx)("div",{className:"isoNoteListHolder",children:s})}):Object(r.jsx)("span",{className:"isoNoResultMsg",children:Object(r.jsx)(c.a,{id:"nothing.found"})})})]})}),Object(r.jsxs)(h.a,{className:"isoNotepadWrapper",children:[Object(r.jsxs)(m,{className:"isoHeader",children:[e,t]}),Object(r.jsx)(j,{className:"isoNoteEditingArea",children:n&&Object(r.jsx)(o,{children:Object(r.jsx)("div",{className:"isoNoteContentHolder",children:n})})})]})]})})})}}t.a=Object(p.c)(u)},717:function(e,t,s){"use strict";var n=s(4),a=s(6),c=s(8),i=s.n(c),r=s(674),o=s(43),l=s(0),h=s(81),d=s(675),p=s(76),m=s(72),j=s(20),u=s(60),b=s(84),O=s(683),x=s(83),g=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]])}return s},f="SECRET_COMBOBOX_MODE_DO_NOT_USE",v=function(e,t){var s,c=e.prefixCls,v=e.bordered,y=void 0===v||v,S=e.className,N=e.getPopupContainer,C=e.dropdownClassName,w=e.popupClassName,H=e.listHeight,P=void 0===H?256:H,I=e.placement,E=e.listItemHeight,M=void 0===E?32:E,F=e.size,D=e.disabled,T=e.notFoundContent,k=e.status,R=e.showArrow,z=g(e,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","popupClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","showArrow"]),_=l.useContext(h.b),A=_.getPopupContainer,L=_.getPrefixCls,V=_.renderEmpty,B=_.direction,J=_.virtual,K=_.dropdownMatchSelectWidth,q=l.useContext(m.b),W=L("select",c),U=L(),X=Object(x.c)(W,B),$=X.compactSize,G=X.compactItemClassnames,Q=l.useMemo(function(){var e=z.mode;if("combobox"!==e)return e===f?"combobox":e},[z.mode]),Y="multiple"===Q||"tags"===Q,Z=void 0!==R?R:z.loading||!(Y||"combobox"===Q),ee=Object(l.useContext)(j.b),te=ee.status,se=ee.hasFeedback,ne=ee.isFormItemInput,ae=ee.feedbackIcon,ce=Object(b.a)(te,k);s=void 0!==T?T:"combobox"===Q?null:(V||d.a)("Select");var ie=Object(O.a)(Object(a.a)(Object(a.a)({},z),{multiple:Y,hasFeedback:se,feedbackIcon:ae,showArrow:Z,prefixCls:W})),re=ie.suffixIcon,oe=ie.itemIcon,le=ie.removeIcon,he=ie.clearIcon,de=Object(o.a)(z,["suffixIcon","itemIcon"]),pe=i()(w||C,Object(n.a)({},"".concat(W,"-dropdown-").concat(B),"rtl"===B)),me=$||F||q,je=l.useContext(p.b),ue=null!==D&&void 0!==D?D:je,be=i()(Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)({},"".concat(W,"-lg"),"large"===me),"".concat(W,"-sm"),"small"===me),"".concat(W,"-rtl"),"rtl"===B),"".concat(W,"-borderless"),!y),"".concat(W,"-in-form-item"),ne),Object(b.b)(W,ce,se),G,S);return l.createElement(r.d,Object(a.a)({ref:t,virtual:J,dropdownMatchSelectWidth:K},de,{transitionName:Object(u.c)(U,Object(u.b)(I),z.transitionName),listHeight:P,listItemHeight:M,mode:Q,prefixCls:W,placement:void 0!==I?I:"rtl"===B?"bottomRight":"bottomLeft",direction:B,inputIcon:re,menuItemSelectedIcon:oe,removeIcon:le,clearIcon:he,notFoundContent:s,className:be,getPopupContainer:N||A,dropdownClassName:pe,showArrow:se||R,disabled:ue}))},y=l.forwardRef(v);y.SECRET_COMBOBOX_MODE_DO_NOT_USE=f,y.Option=r.c,y.OptGroup=r.b,t.a=y}}]);
//# sourceMappingURL=33.3b9f7c13.chunk.js.map